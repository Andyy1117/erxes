extends layout

block layout-content

    .my-layout

        .row
            .col-1 
                div.View
                each val in payments
                    div.Payment
                        div.Payment__button
                            form(method="post")
                                input(type="hidden" name="paymentConfigId", value=val._id)
                                button(type="submit")
                                    div.Payment__logo
                                        if val.selected === true
                                            img(src=`/pl:payment/static/images/${val.type}.png`)
                                        else
                                            img(src=`/pl:payment/static/images/${val.type}.png`, style="filter: grayscale(100%)")

            .col-2         
                p amount:
                    strong 
                        |  #{invoiceData.amount}
                if invoiceData.description
                    p description:
                        strong 
                            |  #{invoiceData.description}


                if invoice
                    if invoice.apiResponse.qr_image
                        img(src="data:image/jpg;base64," + invoice.apiResponse.qr_image) 

                    if invoice.apiResponse.socialPayQrCode
                        img(src=`${invoice.apiResponse.socialPayQrCode}`)

                    p status: 
                        |  #{invoice.status}
                    if invoice.status === 'paid'
                        script. 
                            if (window.confirm('Payment is completed. Do you want to close this window?')) {
                                if (`#{invoiceData.redirectUri}`) {
                                    window.location.href = `#{invoiceData.redirectUri}`;
                                } else {
                                    window.close();
                                }
                            }